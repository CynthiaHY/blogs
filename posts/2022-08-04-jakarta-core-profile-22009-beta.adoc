---
layout: post
title: "Jakarta EE 10 Core Profile makes it debut in Open Liberty 22.0.0.9-beta"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/reece-nana
author_github: https://github.com/reece-nana
seo-title: Jakarta EE 10 Core Profile makes it debut in Open Liberty 22.0.0.9-beta - OpenLiberty.io
seo-description: Open Liberty 22.0.0.9-beta brings you the hot off the press Jakarta EE 10 Core Profile. Jakarta EE 10 is the first release to provide updates to the Jakarta EE specifications since Java EE 8 in 2017.  MicroProfile OpenAPI 3.1 and Password Utilities 1.1 are also made available in this beta release.
blog_description: Open Liberty 22.0.0.9-beta brings you the hot off the press Jakarta EE 10 Core Profile. Jakarta EE 10 is the first release to provide updates to the Jakarta EE specifications since Java EE 8 in 2017.  MicroProfile OpenAPI 3.1 and Password Utilities 1.1 are also made available in this beta release.
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= Jakarta EE 10 Core Profile makes it debut in Open Liberty 22.0.0.9-beta
Reece Nana <https://github.com/reece-nana>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

Open Liberty 22.0.0.9-beta brings you the hot off the press link:https://jakarta.ee/specifications/coreprofile/10/[Jakarta EE 10 Core Profile]. Jakarta EE 10 is the first release that provides some updates to the Jakarta EE specifications since Java EE 8 in 2017. While Jakarta EE 10 release is around the corner, Open Liberty has consumed many of the Jakarta EE 10 specifications and put them in the 22.0.0.9-beta.  In this beta release, the features that make up the new Jakarta EE 10 Core Profile are made available: 

* Jakarta RESTful Web Services 3.1: support multipart/form-data.
* Jakarta JSON-B 3.0: polymorphic serialization/deserialization; deserialization of null to JsonValue.NULL, etc.
* Jakarta JSON-P 2.1: handling duplicated keys; defined more interfaces for primitives, lists and objects 
* Jakarta CDI 4.0: defining new extension APIs; removing reflections; adding new reflection-free language model; empty beans.xml means that only annotated classes are beans; removal of deprecated APIs
** Jakarta Annotation 2.1: allowing `@Priority` to be used on any program element; adding `@Nullable` and `@NotNull`
** Jakarta Interceptors 2.1: picking up the changes from Annotation 2.1

In addition to the Core Profile features, Jakarta EE 10 Expression Language 5.0 is also included in this beta and provides a number of new features and specification clarifications.   

But it's not just Jakarta features that are making their debut in this release!  MicroProfile OpenAPI has been updated to version 3.1, and with it provides the ability to specify optional authentication for operations and multiple annotation enhancements.  Last but not least, Password Utilities 1.1 is introduced in this beta, and with it the ability to no longer forcefully federate stand-alone user registries.


The link:{url-about}[Open Liberty] 22.0.0.9-beta includes the following beta features (along with all GA features):
* Jakarta EE 10 Core Profile
** <<restful, RESTful Web Services 3.1>>
** <<json, Jakarta JSON Binding and Processing>>
** <<cdi, CDI 4.0>>
* <<expression, Jakarta EE 10 Expression Language 5.0>>
* <<microprofile, MicroProfile OpenAPI 3.1>>
* <<password, Password Utilities 1.1>>

[#restful]
== RESTful Web Services 3.1

RESTful Web Services 3.1 (also known as Jakarta Rest 3.1 and formerly known as JAX-RS) is now available in the Open Liberty 22.0.0.9 beta! The 3.1 implementation is an EE10 technology, uses the package name (`jakarta.*`), and the implementation is based on RESTEasy. Please see `Appendix D.1. Changes Since 3.0 Release` of the Jakarta RESTful Web Services link:https://jakarta.ee/specifications/restful-ws/3.1/jakarta-restful-ws-spec-3.1.pdf[specification] for information on the changes provided in this release.

Give it a try - and if you encounter any issues, please let us know!

You can enable RESTful Web Services 3.1 by using the `restfulWS-3.1` feature in the `server.xml`. If you only need a RESTful client, then you can use the `restfulWSClient-3.1` feature instead.

If you want to learn more about RESTful Web Services or see what is coming in future releases, please visit the link:https://projects.eclipse.org/projects/ee4j.rest[community page].


[#json]
== Jakarta JSON Binding and Processing
The Jakarta JSON Processing specification allows users to parse and generate JSON strings. The Jakarta JSON Binding specification is built on top of JSON Processing and allows users to serialize and deserialize Java objects into JSON.

The Jakarta JSON Processing specification has been updated with enhancements for handling duplicate keys when parsing JSON, and better handling of `java.lang.Number` superclass when generating JSON strings. The Jakarta JSON Binding specification has been updated to support polymorphism. 

Open Liberty provides default implementations for both Jakarta JSON Processing and Binding. For JSON Processing we provide users with the Parsson implementation. For JSON Binding we provide users with the Yasson implementation.
To get these default implementations you can enable the `jsonp-2.1` and/or `jsonb-3.0`` features.

[source, xml]
----
<featureManager>
    <feature>jsonb-3.0</feature>
    <feature>jsonp-2.1</feature>
</featureManager>
----

If you want to use a third-party Jakarta JSON Processing 2.1 or Binding 3.0 implementation you can do so by enabling the `jsonpContainer-2.1` and `jsonbContainer-3.0` features respectively. The JSON Container features require users to configure a Basic Extensions using Liberty Libraries (BELLs) element that points to their third-party implementation(s).

[source, xml]
----
<featureManager>
    <feature>jsonbContainer-3.0</feature>
    <feature>jsonpContainer-2.1</feature>
</featureManager>

<library id="myJsonBindingProvider">
  <file name="${path.to.json.binding.provider}"/>
</library>

<bell libraryRef="myJsonBindingProvider"/>

<library id="myJsonProcessingProvider">
  <file name="${path.to.json.processing.provider}"/>
</library>

<bell libraryRef="myJsonProcessingProvider"/>
----

NOTE: When you enable `jsonb-3.0` or `jsonbContainer-3.0` the `jsonp-2.1` feature is automatically enabled. However, enabling the `jsonpContainer-2.1` feature will supersede the `jsonp-2.1` feature and allow the user to provide a third-party implementation.

You can find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology via the following links:

* link:{url-prefix}/docs/latest/json-p-b.html[Open Liberty JSON-P and JSON-B Documentation]
* link:https://javaee.github.io/jsonp/getting-started.html[Jakarta JSON Processing]
* link:https://javaee.github.io/jsonb-spec/getting-started.html[Jakarta JSON Binding]
* link:{url-prefix}/guides/rest-client-java.html[Open Liberty REST Client Guide]


[#cdi]
== CDI 4.0
CDI allows objects to be bound to lifecycle contexts, to be injected, to be associated with interceptors and decorators, and to interact in a loosely coupled fashion by firing and observing events.
As part of Jakarta EE 10 Core Profile, CDI 4.0 brings some functional updates and removes some previously deprecated APIs. This update also brings in new EE 10 versions of the Jakarta Annotations and Jakarta Interceptors APIs.
Support has been added for Build Compatibile Extensions, along with a new Metamodel that is less dependent on reflection at runtime.

[source, java]
----
public class MyExtension implements BuildCompatibleExtension {
    @Enhancement(type=MyFooService.class)
    public void foo(ClassConfig clazz) {
        clazz.addAnnotation(MyQualifier.class)
    }
}
----

* In previous versions of CDI, an empty `beans.xml` file indicated that an archive should be treated as an Explicit Bean Archive (the equivalent of `bean-discovery-mode="all"`). In CDI 4.0, an empty `beans.xml` will now cause an archive to be treated as an Implicit Bean Archive (the equivalent of `bean-discovery-mode="annotated"`). Should it be needed, a configuration option has been provided to enable compatibility with previous versions.

* In previous versions of CDI, a non-empty `beans.xml` file which did not include a version attribute was defaulted to mean `bean-discovery-mode="all"`. In CDI 4.0, it will now default to `bean-discovery-mode="annotated"`.

* Two new Observable Container State Events have been added; Startup and Shutdown. Applications can listen for these events to be notified when the CDI container is starting up and being shut down.

* A new Handle API is added to make programatic lookup of Beans and Instances easier.

* (Jakarta Annotations 2.1) The `@priority` annotation can now be applied to any program element. This is used by CDI 4.0 to allow Stereotypes to include a Pritory annotation.

* Some previously deprecated CDI APIs have been removed.
** @New qualifier
*** Replaced by `@dependent` beans (since CDI 1.1)

** Bean#isNullable()
*** Not used by the implementation (since CDI 1.1)

** BeanManager#fireEvent()
*** Use `BeanManager.getEvent()` instead (since CDI 2.0)

** BeanManager#createInjectionTarget(AnnotatedType)
*** Replaced by `BeanManager#getInjectionTargetFactory(AnnotatedType)` (since CDI 1.1)

** BeforeBeanDiscovery#addAnnotatedType(AnnotatedType)
*** Replaced by `BeforeBeanDiscovery#addAnnotatedType(AnnotatedType, String)` (since CDI 1.1)

* The Liberty configuration element has been superseded by a new element that applies to all versions of CDI (1.2 and newer).

[source, xml]
----
<cdi enableImplicitBeanArchives="false" emptyBeansXmlCDI3Compatibility="true"/>
----

* The attribute `enableImplicitBeanArchives` is the same as it was in previous versions.
If set to `true` (default) then archives which do not contain a `beans.xml` file will be treated as Implicit Bean Archives and will be scanned for classes that have Bean Defining Annotations.
If set to `false` then archives which do not contain a `beans.xml` file will be not be scanned for annotated classes.

* The attribute `emptyBeansXmlCDI3Compatibility` only applies to CDI 4.0.
If set to `true` then an archive which contains an empty `beans.xml` file will be treated as an Explicit Bean Archive (as it was in CDI 3.0 and earlier)

* If set to `false` (default) then an archive which contains an empty `beans.xml` file will be treated as an Implicit Bean Archive. This is the equivalent to setting `bean-discovery-mode="annotated"`.

[source, xml]
----
<featureManager>
  <feature>cdi-4.0</feature>
</featureManager>

<cdi enableImplicitBeanArchives="false" emptyBeansXmlCDI3Compatibility="true"/>
----

[#expression]
== Jakarta EE 10 Expression Language 5.0

The `expressionLanguage-5.0` feature is an implementation of the Expression Language 5.0 Specification for Jakarta EE 10. The Expression Language 5.0 includes a number of new features and specification clarifications. A link to the Expression Language 5.0 specification can be found link:https://jakarta.ee/specifications/expression-language/5.0/[here].

The following link:https://jakarta.ee/specifications/expression-language/5.0/jakarta-expression-language-spec-5.0.html#changes-between-5-0-and-4-0[link] shows the change history of the Specification between the Expression Language 4.0 and Expression Language 5.0.

One of the new features is the addition of the link:https://jakarta.ee/specifications/expression-language/5.0/apidocs/jakarta.el/jakarta/el/methodreference[MethodReference] which "Provides information about the method to which a method expression resolves." This new class allows developers to access any annotations present on a particular method using the `getAnnotations()` method. There are also a few deprecations and clarifications within the Expression Language 5.0 Specification.

[source,xml]
----
   <featureManager>
        <feature>expressionLanguage-5.0</feature>
    </featureManager>
----

The Jakarta Expression Language 5.0 Specification and Javadocs can be found link:https://jakarta.ee/specifications/expression-language/5.0/[here].

[#microprofile]
== MicroProfile OpenAPI 3.1 

OpenAPI is a standardised way of documenting REST APIs in a JSON or YAML format. MicroProfile OpenAPI helps you generate and serve OpenAPI documentation for your REST applications built using JAX-RS or Jakarta restfulWS. This can be useful for developers to test out the API during development, or for people using the API in production.

To use it, add the `mpOpenAPI-3.1` feature to your server.xml, deploy your rest application and then visit `/openapi` to view the OpenAPI documentation, or visit `/openapi/ui` for a user interface that lets you browse through it. You can enhance the documentation using annotations to add things like textual descriptions to each method. The annotations are available as a maven dependency:

[source, xml]
----
<dependency>
    <groupId>org.eclipse.microprofile.openapi</groupId>
    <artifactId>microprofile-openapi-api</artifactId>
    <version>3.1-RC2</version>
</dependency>
----

Version 3.1 is a minor release which includes:

* Some Jakarta Bean Validation annotations will now be read and their restrictions will be added to object schemas
* Most annotations now include an `extension` attribute
* `@SecurityRequirementsSet` can now be used to document operations where authentication is optional or where more than one authentication mechanism is required

More information about MicroProfile OpenAPI can be found in:

* link:{url-prefix}/guides/microprofile-openapi.html[Open Liberty MicroProfile OpenAPI guide]
* link:{url-prefix}/docs/latest/documentation-openapi.html[Open Liberty OpenAPI documentation]
* link:https://download.eclipse.org/microprofile/microprofile-open-api-3.1-RC2/apidocs/[MicroProfile OpenAPI 3.1 Javadoc]
* link:https://download.eclipse.org/microprofile/microprofile-open-api-3.1-RC2/microprofile-openapi-spec-3.1-RC2.html[MicroProfile OpenAPI 3.1 Specification]

[#password]
== Password Utilities 1.1 

The new `passwordUtilities-1.1` feature has been created to no longer start the `federatedRegistry-1.0` feature or the Jakarta Connectors feature. The new feature is part of core edition, whereas the `passwordUtilities-1.0` feature is part of base edition.
Stand-alone user registries will no longer be forcefully federated, which sometimes results in slightly different behavior. The password utilities APIs can now be used in core edition.

Add the `passwordUtilities-1.1` feature to the list of features in the server.xml file:

[source, xml]
----
<featureManager>
    <feature>passwordUtilities-1.1</feature>
</featureManager>
----

For more information regarding the Password Utilities, check out the link:{url-prefix}/docs/latest/reference/feature/passwordUtilities.html[feature documentation].

[#run]
=== Try it now 

To try out these features, just update your build tools to pull the Open Liberty All Beta Features package instead of the main release. The beta works with Java SE 18, Java SE 17, Java SE 11, and Java SE 8.

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
  <groupId>io.openliberty.beta</groupId>
  <artifactId>openliberty-runtime</artifactId>
  <version>22.0.0.9-beta </version>
  <type>pom</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty.beta', name: 'openliberty-runtime', version: '[22.0.0.9-beta ,)'
}
----

Or take a look at our link:{url-prefix}/downloads/#runtime_betas[Downloads page].

[#feedback]
== Your feedback is welcomed

Let us know what you think on link:https://groups.io/g/openliberty[our mailing list]. If you hit a problem, link:https://stackoverflow.com/questions/tagged/open-liberty[post a question on StackOverflow]. If you hit a bug, link:https://github.com/OpenLiberty/open-liberty/issues[please raise an issue].


