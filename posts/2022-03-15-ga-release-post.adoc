---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/ryan-storey
author_github: https://github.com/ryan-storey
seo-title: Retrying SQL operations in transaction recovery logs and more in Open Liberty 22.0.0.3 - OpenLiberty.io
seo-description: Open Liberty 22.0.0.3 allows SQL Operations to be retried in transaction recovery logs. This release also includes several significant bug fixes. In addition, since 22.0.0.2 we have published a brand new Open Liberty guide on containerizing microservices with Podman!
blog_description: Open Liberty 22.0.0.3 allows SQL Operations to be retried in transaction recovery logs. This release also includes several significant bug fixes. In addition, since 22.0.0.2 we have published a brand new Open Liberty guide on containerizing microservices with Podman!
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= Retrying SQL operations in transaction recovery logs and more in Open Liberty 22.0.0.3
Ryan Storey <https://github.com/ryan-storey>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

Open Liberty 22.0.0.3 allows SQL Operations to be retried in transaction recovery logs. This release also includes several significant bug fixes. In addition, since 22.0.0.2 we have published a brand new Open Liberty guide on containerizing microservices with Podman!

In link:{url-about}[Open Liberty] 22.0.0.3:

* <<sql, Allow SQL Operations to be retried in transaction recovery logs>>

Along with the new features and functions added to the runtime, we’ve also made <<guides, updates to our guides>>.

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A22.0.0.3_NO_PERIODS+label%3A%22release+bug%22[22.0.0.3].

[#run]
== Run your apps using 22.0.0.3

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
    <groupId>io.openliberty</groupId>
    <artifactId>openliberty-runtime</artifactId>
    <version>22.0.0.3</version>
    <type>zip</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[22.0.0.3,)'
}
----

Or if you're using Docker:

[source]
----
FROM open-liberty
----

Or take a look at our link:{url-prefix}/downloads/[Downloads page].

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

[#sql]
=== Allow SQL Operations to be retried in transaction recovery logs

In Liberty, transaction services are implicitly activated when you specify features that require the use of transactions; for example, `jpa-2.0`, `jdbc-4.0`, and `wasJmsServer-1.0`.

When Liberty detects a failure in writing to its transaction recovery logs, it will invalidate the logs and disallow further global transactions. In order to do further transactional work, the customer must restart the server. This means applications have to be reloaded when the server restarts. This can take a considerable amount of time for some applications.

Under certain circumstances, such as when the recovery log failure is caused by transient database connection errors, the condition can be handled by retrying the database operation thus avoiding the need to shutdown the server and reload the apps.

A new transaction service configuration attribute has been introduced to the transaction stanza in the Liberty `server.xml` file that allows these transaction log SQL operations to be retried. It is named `enableLogRetries` and should be set to `true` to enable retries. For example,

[source,xml]
----
<transaction
dataSourceRef="tranlogDataSource"
recoverOnStartup="true"
waitForRecovery="false"
heuristicRetryInterval="10"
enableLogRetries="true"
/>
----

By default the new functionality is disabled.

For more information on the storing or Transaction Recovery Logs in an `RDBMS`, please refer to the Knowledge Center article link:https://www.ibm.com/support/pages/websphere-application-server-storing-liberty-profile-transaction-logs-relational-database[Storing Liberty profile transaction logs in a relational database].

Add the feature to the `server.xml`:

[#bugs]
== Notable bugs fixed in this release


We’ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If you’re interested, here’s the  link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A22.0.0.3_NO_PERIODS+label%3A%22release+bug%22[full list of bugs fixed in 22.0.0.3].

[#guides]
== New and updated guides since the previous release
As Open Liberty features and functionality continue to grow, we continue to add link:https://openliberty.io/guides/?search=new&key=tag[new guides to openliberty.io] on those topics to make their adoption as easy as possible.  Existing guides also receive updates in order to address any reported bugs/issues, keep their content current, and expand what their topic covers.

* link:{url-prefix}/guides/containerize-podman.html[Containerizing microservices with Podman]
** This guide will teach you how to containerize and run your microservices on Open Liberty using Podman.

== Get Open Liberty 22.0.0.3 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
