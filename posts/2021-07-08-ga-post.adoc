---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/jakub-pomykala
author_github: https://github.com/jakub-pomykala
seo-title: TITLE - makes sure it ends with - OpenLiberty.io
seo-description: DESCRIPTION
blog_description: DESCRIPTION
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= TITLE
Jakub Pomykala <https://github.com/jakub-pomykala>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

// // // // // // // //
// Above:
// Do not insert any blank lines between any of the lines above.
// Do not remove or edit the variables on the lines beneath the author name.
//
// "open-graph-image" is set to OL logo. Whenever possible update this to a more appriopriate/specific image (For example if present a image that is being used in the post). However, it
// can be left empty which will set it to the default
//
// Replace TITLE with the blog post title eg: MicroProfile 3.3 is now available on Open Liberty 20.0.0.4
// Replace GITHUB_USERNAME with your GitHub username eg: lauracowen
// Replace DESCRIPTION with a short summary (~60 words) of the release (a more succinct version of the first paragraph of the post).
// Replace AUTHOR_NAME with your name as you'd like it to be displayed, eg: Laura Cowen
//
// Example post: 2020-04-09-microprofile-3-3-open-liberty-20004.adoc
//
// If adding image into the post add :
// -------------------------
// [.img_border_light]
// image::img/blog/FILE_NAME[IMAGE CAPTION ,width=70%,align="center"]
// -------------------------
// "[.img_border_light]" = This adds a faint grey border around the image to make its edges sharper. Use it around screenshots but not           
// around diagrams. Then double check how it looks.
// There is also a "[.img_border_dark]" class which tends to work best with screenshots that are taken on dark
// backgrounds.
// Change "FILE_NAME" to the name of the image file. Also make sure to put the image into the right folder which is: img/blog
// change the "IMAGE CAPTION" to a couple words of what the image is
// // // // // // // //

// tag::intro[]

RELEASE_SUMMARY

// // // // // // // //
// Above:
// Leave any instances of `tag::xxxx[]` or `end:xxxx[]` as they are.
//
// Replace RELEASE_SUMMARY with a short paragraph that summarises the release. Start with the lead feature but also summarise what else is new in the release. You will agree which will be the lead feature with the reviewers so you can just leave a placeholder here until after the initial review.
// // // // // // // //

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A21.0.0.7+label%3A%22release+bug%22[21.0.0.7].
// end::intro[]

// // // // // // // //
// Above:
// Replace RELEASE_VERSION with the the version number of Open Liberty. e.g. 20.0.0.10
// // // // // // // //


// tag::run[]
[#run]

// // // // // // // //
// LINKS
//
// OpenLiberty.io site links:
// link:{url-prefix}/guides/maven-intro.html[Maven]
// 
// Off-site links:
//link:https://openapi-generator.tech/docs/installation#jar[Download Instructions]
//
// IMAGES
//
// Place images in ./img/blog/
// Use the syntax:
// image::/img/blog/log4j-rhocp-diagrams/current-problem.png[Logging problem diagram,width=70%,align="center"]
// // // // // // // //

== Run your apps using 21.0.0.7

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
    <groupId>io.openliberty</groupId>
    <artifactId>openliberty-runtime</artifactId>
    <version>21.0.0.7</version>
    <type>zip</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[21.0.0.7,)'
}
----

Or if you're using Docker:

[source]
----
FROM open-liberty
----
//end::run[]

// // // // // // // //
// Above:
// Replace the RELEASE_VERSION with the Open Liberty release number e.g. 20.0.0.4
// // // // // // // //

Or take a look at our link:{url-prefix}/downloads/[Downloads page].

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

//tag::features[]

[#TAG_1]
=== FEATURE_1_HEADING

// Add the introduction to the feature and description here

Add the feature to the `server.xml`:

[source, xml]
----
<server>
  <featureManager>
    <feature>FEATURE</feature>
  </featureManager>
</server>
----

[#TAG_2]
== FEATURE_2_TITLE

//Add the introduction to the features here

[#SUB_TAG_1]
=== SUB_FEATURE_1_TITLE

//Add the introduction to the feature and description here
Add the feature to the `server.xml`:

[source, xml]
----
<server>
  <featureManager>
    <feature>FEATURE</feature>
  </featureManager>
</server>
----

[#SUB_TAG_2]
=== SUB_FEATURE_2_TITLE

//Add the introduction to the feature and description here

Add the feature to the `server.xml`:

[source, xml]
----
<server>
  <featureManager>
    <feature>FEATURE</feature>
  </featureManager>
</server>
----

[#TAG_3]
== FEATURE_3_TITLE

//Add the introduction to the feature and description here

For more details, check the LINK[LINK_DESCRIPTION].

//end::features[]

// // // // // // // //
// Above:
// Replace TAG_X/SUB_TAG_X with the given tag of your secton from the contents list
// Replace SUB_FEATURE_TITLE/FEATURE_X_TITLE with the given title from the contents list 
// Replace FEATURE with the feature name for the server.xml file e.g. mpHealth-1.4
// Replace LINK with the link for extra information given for the feature
// Replace LINK_DESCRIPTION with a readable description of the information
// // // // // // // //

[#bugs]
== Notable bugs fixed in this release


We’ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If you’re interested, here’s the  link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A21.0.0.7+label%3A%22release+bug%22[full list of bugs fixed in 21.0.0.7].


* link:https://github.com/OpenLiberty/open-liberty/issues/17344[Occasional login failure of OIDC RP if clientSecret is not configured]
+
In the `OIDC RP`, when no `clientSecret` is configured, validation of the signature of the `JWT` occasionally would fail with a message similar to:

[source, text]
----
CWWKS1739E: A signing key required by signature algorithm [none] was not available. null
----

This bug was fixed by updating the `JWT `validation code in the `OpenID` Connect client to return a `null` `java.security.Key` object as the signature verification key if `signatureAlgorithm` is set to `none` in the `OpenID` Connect client configuration. Before, an `HmacKey` object was instantiated using the `clientSecret` value from the `OIDC` client configuration, even though the Key object will never be used if `signatureAlgorithm` is set to `none`. The new behavior avoids a `NullPointerException` when a `clientSecret` is not configured in the `OIDC` client.

* link:https://github.com/OpenLiberty/open-liberty/issues/17593[EJB Singleton Lifecycle Deadlock]
+
When the Singleton called another managed object (like another session bean or asynchronous bean) OR the Singleton had a lifecycle interceptor.
The other managed object calls the Singleton. (Either through an asynchronous method that is invoked at the right time (so a timing problem) or through the method the Singleton called on it).
This would cause a deadlock because the Singleton would be locked from the lifecycle event.

For `@PreDestroy` we are no longer locking the singleton, depending on when the destroy resolves, the other managed object might get an error stating the bean has been stopped/destroyed.

For `@PostConstruct` the `EJBContainer` must lock the creation of `SingletonBeans` to ensure only one gets created. Instead of deadlocking forever we now have a timeout value of attempting to obtain a lock. This value is 2 minutes by default but configurable by `@AccessTimeout` value either on the class or the `@PostConstruct` method. A thread that times out trying to access the Singleton will get a `javax.ejb.ConcurrentAccessTimeoutException`

* link:https://github.com/OpenLiberty/open-liberty/issues/17235[Improve featureUtility return code when invalid action name is specified]
+
Users would see an erroneous `return code 0` when an invalid action was specified. This was now changed to `BAD_ARGUMENT (20)`. Because of this change any scripted invocations of featureUtility can now detect this.

* link:https://github.com/OpenLiberty/open-liberty/issues/17299[Allow multiple version of singleton feature with featureUtility installFeature command]
+
FeatureUtility installFeature command did not support the installation of multiple versions of the singleton feature using a single command. As a workaround, users had to install each version of the feature one by one. The fix will now allow users to install multiple versions of the feature in a single command, and will also allow users to install a feature bundle addon (libertyCoreBundle, baseBundle, etc) to install all features that apply to their liberty edition. 

* link:https://github.com/OpenLiberty/open-liberty/issues/17666[JavaMail tries to use a resource file that only exists in the implementation]
+
Instead of the `javax.mail.Session` constructor (from `wlp/dev/api/spec/com.ibm.websphere.javaee.mail.1.6_1.0.53.jar`) tried to load the resource `/META-INF/javamail.default.address.map`, that is required. However, this file only existed in the implementation (`wlp/lib/com.ibm.ws.com.sun.mail.javax.mail.1.6_1.6.53.jar`) and it is not able to find it, so it caused a warning to show up:

[source, text]
----
[WARNING ] expected resource not found: /META-INF/javamail.default.address.map
----

This issue was resolved by adding `javamail.default.address.map` to the `app-resource` header.

* link:https://github.com/OpenLiberty/open-liberty/issues/17658[concurrencyPolicy loses queue slots when managed executor deactivates and erroneously cancels tasks of other executors]
+
It has been noticed that the identifier that is supplied by the managed executor to `PolicyExecutor.cancel` is ignored by the policy executor and it appears to indiscriminately cancel everything. This would cause a bug where 2 or more managed executors sharing the same `concurrencyPolicy` and used by different applications where only one managed executor deactivates, would erroneously see cancellation of tasks belonging to the other managed executor as well. We have now switched the code from removing directly from the queue and then issuing the cancel to just issuing the cancel.  This is the correct solution because the cancel operation contains the correct logic for decrementing the count against the `maxQueueSize`.

* link:https://github.com/OpenLiberty/open-liberty/issues/17482[JSP with trackDependencies should check for updates of included JSP in the extended document root]
+
`JSP` with `trackDependencies=true` does not always check for updates of included `JSP` in the extended document root. We have now corrected the tests of the Last Modified Date for a dependent `JSP` file that is in the extended document root.

* link:https://github.com/OpenLiberty/open-liberty/issues/14575[OAuth client registration: Client IDs with GB18030 characters don't work]
+
When creating a token containing some `GB18030` characters, the token could not be displayed correctly. It also could not be edited nor deleted.
This issue was fixed by adding checks to ensure the `client_id` and `client_secret` parameters do not contain characters outside of the `%x20-7E` range, per the `OAuth 2.0` spec.


== Get Open Liberty 21.0.0.7 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
